language: node_js
node_js:
  - "node"
cache:
  directories:
  - node_modules
jobs:
  - stage: test
    script: yarn test
  - stage: build
    script: yarn build
  - stage: deploy
    deploy:
      provider: pages
      skip_cleanup: true
      github_token: $GITHUB_TOKEN
      local_dir: build
      on:
        branch: master